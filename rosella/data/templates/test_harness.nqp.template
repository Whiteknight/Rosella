# TAP Test Harness
# Automatically generated by Rosella

my $factory := Rosella::construct(Rosella::Harness::TestRun::Factory);
my $harness := Rosella::construct(Rosella::Harness);
my $testview := $harness.default_view();

$factory.add_test_dirs("NQP",<$ for dir in test.dirs $>
    "<# dir #>",<$ endfor $>
    :recurse(1)
);

my $run := $factory.create();
$testview.add_run($run, 0);
$harness.run($run, $testview);
$testview.show_results();

INIT {
    my $rosella := pir::load_bytecode__PS("rosella/core.pbc");
    Rosella::initialize_rosella("harness");
}
