namespace Rosella { namespace Test
{
    /* Test Asserter to provide an OO-like interface to the functions defined
       in the Assert namespace
    */
    // TODO: Delete Assert namespace and turn all functions there into methods
    //       on this object.
    class Asserter
    {
        function find_method[vtable](string name)
        {
            var assert_name = name;
            return function(var obj, var p [slurpy], var n [slurpy,named]) {
                var assert_ns = null;
                var assert_name_pmc = "Assert";
                ${ get_hll_namespace assert_ns, assert_name_pmc };
                var assertion = assert_ns.find_sub(assert_name);
                assertion(p:[flat], n:[flat]);
            };
        }
    }
}}
